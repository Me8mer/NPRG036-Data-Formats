[
  .Owner[] |
  .OwnsEshop[] | . as $shop |
  .ProvidesAccount | . as $account |
  select($account.ProvidesCart.TotalPrice > 500) |
  {
    shop: $shop.Name,
    username: $account.Login,
    cartValue: $account.ProvidesCart.TotalPrice,
    itemCount: $account.ProvidesCart.ItemCount
  }
] | sort_by(.cartValue) | .[]

# carts with value above 500